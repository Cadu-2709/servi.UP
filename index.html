<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Serviços</title>


     <link rel="manifest" href="manifest.json">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Gestor">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="app-container" class="max-w-2xl mx-auto p-4">

        <div id="view-loading" class="view active">
            <div class="flex flex-col items-center justify-center min-h-screen">
                <div class="loader"></div>
                <p class="mt-4 text-gray-600">A carregar...</p>
            </div>
        </div>

        <div id="view-login" class="view">
            <div class="flex flex-col items-center justify-center min-h-screen">
                <div class="w-full max-w-sm bg-white p-8 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold text-center mb-6">Login</h2>
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label for="login-email" class="block font-medium mb-1">Email</label>
                            <input type="email" id="login-email" class="w-full p-2 border rounded-md" required>
                        </div>
                        <div>
                            <label for="login-password" class="block font-medium mb-1">Senha</label>
                            <input type="password" id="login-password" class="w-full p-2 border rounded-md" required>
                        </div>
                        <button type="submit" class="w-full bg-[var(--cor-primaria)] text-white py-2 px-4 rounded-md hover:bg-[var(--cor-primaria-hover)]">Entrar</button>
                    </form>
                    <p class="text-center mt-4 text-sm">
                        Não tem uma conta? <a href="mailto:seu-email-de-suporte@exemplo.com" class="text-[var(--cor-texto-primaria)] hover:underline">Contacte o suporte</a>
                    </p>
                </div>
            </div>
        </div>
        
        <div id="main-content" class="hidden">
            <div id="view-dashboard" class="view active pt-8 md:pt-12">
                <header class="mb-10 text-center">
                    <img id="logo-main" src="https://placehold.co/200x100/4F46E5/FFFFFF?text=Logo" alt="Logo da Empresa" class="h-24 mx-auto mb-6 object-contain">
                    <button id="logout-btn" class="mt-4 text-sm text-red-600 hover:underline">Sair</button>
                </header>

            <div class="grid grid-cols-2 gap-4 max-w-sm mx-auto">
                <button data-view="view-budget-form" class="nav-btn bg-[var(--cor-primaria)] text-white p-4 rounded-lg shadow-md hover:bg-[var(--cor-primaria-hover)] transition flex flex-col items-center justify-center h-32">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mb-2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                    <span class="font-semibold">Novo Orçamento</span>
                </button>
                <button data-view="view-budgets-list" class="nav-btn bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition flex flex-col items-center justify-center h-32">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mb-2"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                    <span class="font-semibold">Orçamentos</span>
                </button>
                <button data-view="view-clients-list" class="nav-btn bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition flex flex-col items-center justify-center h-32">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mb-2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    <span class="font-semibold">Meus Clientes</span>
                </button>
                <button data-view="view-expenses-list" class="nav-btn bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition flex flex-col items-center justify-center h-32">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mb-2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                    <span class="font-semibold">Despesas</span>
                </button>

                <button data-view="view-reports" class="nav-btn bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition flex flex-col items-center justify-center h-32">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mb-2"><path d="M12 20V10"></path><path d="M18 20V4"></path><path d="M6 20V16"></path></svg>
                    <span class="font-semibold">Relatórios</span>
                </button>
                <button data-view="view-tools" class="nav-btn bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition flex flex-col items-center justify-center h-32">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings2-icon lucide-settings-2"><path d="M14 17H5"/><path d="M19 7h-9"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/></svg>
                    <span class="font-semibold">Ferramentas</span>
                </button>
            </div>
                
                <div id="next-appointment-card" class="mt-6 bg-white p-4 rounded-lg shadow-md hidden">
                    <h3 class="font-bold text-lg mb-2 text-[var(--cor-texto-primaria)]">Próximo Agendamento</h3>
                    <p id="next-appointment-details"></p>
                </div>
            </div>

            <div id="view-clients-list" class="view">
                <header class="flex items-center justify-between mb-4">
                    <button data-view="view-dashboard" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button>
                    <h2 class="text-2xl font-bold">Meus Clientes</h2>
                    <button id="add-client-btn" class="p-2 rounded-full bg-[var(--cor-primaria)] text-white hover:bg-[var(--cor-primaria-hover)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button>
                </header>

                <div class="mb-4">
                    <input type="text" id="client-search-input" placeholder="Digite para buscar um cliente..." class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                </div>

                <div id="clients-list-container" class="space-y-3"></div>
            </div>
            
            <div id="view-client-form" class="view">
                <header class="flex items-center mb-4">
                    <button data-view="view-clients-list" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button>
                    <h2 id="client-form-title" class="text-2xl font-bold ml-4">Novo Cliente</h2>
                </header>
                
                <form id="client-form" class="space-y-4 bg-white p-6 rounded-lg shadow"><input type="hidden" id="client-id"><div><label for="client-name" class="block font-medium mb-1">Nome do Cliente</label><input type="text" id="client-name" class="w-full p-2 border rounded-md" required></div><div><label for="client-phone" class="block font-medium mb-1">Celular</label><input type="tel" id="client-phone" class="w-full p-2 border rounded-md"></div><div><label for="client-data" class="block font-medium mb-1">Dados</label><textarea id="client-data" rows="4" class="w-full p-2 border rounded-md" placeholder="Informações do cliente"></textarea></div><div class="flex gap-4"><button type="button" id="delete-client-btn" class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 hidden">Excluir</button><button type="submit" class="w-full bg-[var(--cor-primaria)] text-white py-2 px-4 rounded-md hover:bg-[var(--cor-primaria-hover)]">Salvar Cliente</button></div></form>
                
                <div class="mt-8">
                    <button id="toggle-history-btn" class="w-full bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-md hover:bg-gray-300 mb-4">Ver Histórico de orçamento</button>
                    <div id="client-history-container" class="space-y-3 hidden"></div>
                </div>
            </div>

            <div id="view-budget-form" class="view">
                <header class="flex items-center mb-4"><button data-view="view-dashboard" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button><h2 id="budget-form-title" class="text-2xl font-bold ml-4">Novo Orçamento</h2></header>
                <form id="budget-form" class="space-y-6 bg-white p-6 rounded-lg shadow"><input type="hidden" id="budget-id">
                    <div>
                        <label for="budget-title" class="block font-medium mb-1">Título do Orçamento <span class="text-gray-500 text-sm"></span></label>
                        <input type="text" id="budget-title" class="w-full p-2 border rounded-md" required>
                    </div>
                    <div><label for="budget-client-id" class="block font-medium mb-1">Cliente</label><select id="budget-client-id" class="w-full p-2 border rounded-md" required><option value="">-- Selecione um Cliente --</option><option value="new">-- Cadastrar Novo Cliente --</option></select></div><div id="new-client-fields" class="hidden space-y-2 border-l-4 border-[var(--cor-borda-primaria-leve)] pl-4"><input type="text" id="budget-new-client-name" placeholder="Nome do Novo Cliente" class="w-full p-2 border rounded-md"><input type="tel" id="budget-new-client-phone" placeholder="Celular (Opcional)" class="w-full p-2 border rounded-md"></div><div class="space-y-2"><h3 class="font-bold text-lg">Serviços</h3><div id="services-container" class="space-y-2"></div><button type="button" id="add-service-btn" class="text-[var(--cor-texto-primaria)] font-semibold flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>Adicionar Serviço</button><div id="services-total-manual-container" class="mt-2 hidden"><label for="total-services-manual" class="block font-medium text-sm">Valor Total dos Serviços (se não detalhado)</label><input type="number" step="0.01" id="total-services-manual" class="w-full p-2 border rounded-md" placeholder="R$"></div></div><div class="space-y-2"><h3 class="font-bold text-lg">Produtos</h3><div id="products-container" class="space-y-2"></div><button type="button" id="add-product-btn" class="text-[var(--cor-texto-primaria)] font-semibold flex items-center gap-1"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>Adicionar Produto</button><div id="products-total-manual-container" class="mt-2 hidden"><label for="total-products-manual" class="block font-medium text-sm">Valor Total dos Produtos (Opcional)</label><input type="number" step="0.01" id="total-products-manual" class="w-full p-2 border rounded-md" placeholder="R$"></div></div><div class="border-t pt-4 space-y-4"><div class="text-2xl font-bold text-right"><span>TOTAL:</span><span id="total-budget-amount">R$ 0,00</span></div><div><h4 class="font-semibold mb-2">Apresentação para o cliente no PDF:</h4><div class="flex gap-4"><label class="flex items-center"><input type="radio" name="pdf-presentation" value="detailed" class="mr-2" checked> Mostrar valores individuais</label><label class="flex items-center"><input type="radio" name="pdf-presentation" value="total_only" class="mr-2"> Ocultar valores individuais</label></div></div></div><button type="submit" class="w-full bg-[var(--cor-primaria)] text-white py-3 px-4 rounded-md hover:bg-[var(--cor-primaria-hover)] font-bold">Salvar orçamento</button></form>
            </div>
            
            <div id="view-budgets-list" class="view">
                <header class="flex items-center justify-between mb-4"><button data-view="view-dashboard" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button><h2 class="text-2xl font-bold">Orçamentos</h2><div></div></header>
                    <div class="mb-4">
                        <input type="text" id="budget-search-input" placeholder="Buscar por título ou nome do cliente..." class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                    </div>
                <div id="budget-filters" class="flex justify-center gap-2 mb-4 border-b pb-2"><button class="filter-btn-status px-3 py-1 rounded-full text-sm font-semibold bg-[var(--cor-primaria)] text-white" data-status="all">Todos</button><button class="filter-btn-status px-3 py-1 rounded-full text-sm font-semibold bg-gray-200" data-status="pending">Em Aberto</button><button class="filter-btn-status px-3 py-1 rounded-full text-sm font-semibold bg-gray-200" data-status="scheduled">Agendados</button><button class="filter-btn-status px-3 py-1 rounded-full text-sm font-semibold bg-gray-200" data-status="completed">Concluídos</button></div>
                <div id="budgets-list-container" class="space-y-3"></div>
            </div>

            <div id="view-reports" class="view">
                <header class="flex items-center mb-4"><button data-view="view-dashboard" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button><h2 class="text-2xl font-bold ml-4">Relatórios</h2></header>
                <div class="bg-white p-4 rounded-lg shadow"><div id="report-filters" class="flex justify-center gap-2 mb-4 border-b pb-2"><button class="filter-btn-period px-3 py-1 rounded-full text-sm font-semibold bg-[var(--cor-primaria)] text-white" data-period="month">Este Mês</button><button class="filter-btn-period px-3 py-1 rounded-full text-sm font-semibold bg-gray-200" data-period="week">Últimos 7 Dias</button><button class="filter-btn-period px-3 py-1 rounded-full text-sm font-semibold bg-gray-200" data-period="custom">Personalizado</button></div><div id="custom-period-fields" class="hidden flex gap-4 mb-4"><input type="date" id="start-date" class="w-full p-2 border rounded-md"><input type="date" id="end-date" class="w-full p-2 border rounded-md"></div><div class="grid grid-cols-2 gap-4 text-center"><div class="bg-green-100 p-4 rounded-lg"><h4 class="text-sm font-semibold text-green-800">Total Faturado</h4><p id="report-total-billed" class="text-3xl font-bold text-green-800">R$ 0,00</p></div><div class="bg-red-100 p-4 rounded-lg"><h4 class="text-sm font-semibold text-red-800">Total Despesas</h4><p id="report-total-expenses" class="text-3xl font-bold text-red-800">R$ 0,00</p></div></div><div class="bg-blue-100 p-4 rounded-lg mt-4 text-center"><h4 class="text-sm font-semibold text-blue-800">Lucro </h4><p id="report-net-profit" class="text-3xl font-bold text-blue-800">R$ 0,00</p></div>
                <div class="mt-6"><h3 class="text-lg font-semibold mb-2">Detalhes do Período</h3><div id="details-list-container" class="space-y-2"></div></div>
                </div>
            </div>

            <div id="view-expenses-list" class="view">
                <header class="flex items-center justify-between mb-4"><button data-view="view-dashboard" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button><h2 class="text-2xl font-bold">Despesas</h2><button id="add-expense-btn" class="p-2 rounded-full bg-[var(--cor-primaria)] text-white hover:bg-[var(--cor-primaria-hover)]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button></header>
                <div id="expenses-list-container" class="space-y-3"></div>
            </div>
            
            <div id="view-expense-form" class="view">
                <header class="flex items-center mb-4"><button data-view="view-expenses-list" class="nav-btn p-2 rounded-full hover:bg-gray-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg></button><h2 id="expense-form-title" class="text-2xl font-bold ml-4">Nova Despesa</h2></header>
                <form id="expense-form" class="space-y-4 bg-white p-6 rounded-lg shadow"><input type="hidden" id="expense-id"><div><label for="expense-description" class="block font-medium mb-1">Descrição</label><input type="text" id="expense-description" class="w-full p-2 border rounded-md" required></div><div><label for="expense-value" class="block font-medium mb-1">Valor</label><input type="number" step="0.01" id="expense-value" class="w-full p-2 border rounded-md" required></div><div><label for="expense-date" class="block font-medium mb-1">Data</label><input type="date" id="expense-date" class="w-full p-2 border rounded-md" required></div><div class="flex gap-4"><button type="button" id="delete-expense-btn" class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 hidden">Excluir</button><button type="submit" class="w-full bg-[var(--cor-primaria)] text-white py-2 px-4 rounded-md hover:bg-[var(--cor-primaria-hover)]">Salvar Despesa</button></div></form>
            </div>

           <div id="view-tools" class="view">
    <header class="flex items-center mb-4">
        <button id="tools-back-btn" class="nav-btn p-2 rounded-full hover:bg-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="m15 18-6-6 6-6"/></svg>
        </button>
        <h2 class="text-2xl font-bold ml-4">Ferramentas</h2>
    </header>

    <div id="tools-menu" class="space-y-3">
        <button data-tool="calculator" class="tool-menu-btn w-full bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition text-left flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-4 text-[var(--cor-primaria)]"><path d="M19 5H5v14h14V5z"/><path d="M15 9h-2a2 2 0 1 0-4 0H7"/><path d="m12 15-2-2 4 0-2 2z"/></svg>
            <span class="font-semibold">Calculadora de Porcentagem</span>
        </button>
        <button data-tool="pix" class="tool-menu-btn w-full bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition text-left flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-4 text-[var(--cor-primaria)]"><path d="M12 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8Z"/><path d="M18 2v6h-6"/><path d="M8 18h1.5a1.5 1.5 0 0 0 0-3H8v4"/><path d="M12.5 18h1.5a1.5 1.5 0 0 0 0-3h-1.5v4"/></svg>
            <span class="font-semibold">Gerador de Cobrança PIX</span>
        </button>
        <button data-tool="marketing" class="tool-menu-btn w-full bg-white p-4 rounded-lg shadow-md hover:bg-gray-50 transition text-left flex items-center">
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-4 text-[var(--cor-primaria)]"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
            <span class="font-semibold">Marketing: Adicionar Logo</span>
        </button>
    </div>

    <div id="tool-content-wrapper" class="hidden">
        
        <div id="tool-calculator" class="tool-content hidden">
             <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-lg font-bold mb-4 border-b pb-2">Calculadora de Porcentagem</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="calc-percent" class="block font-medium mb-1">Porcentagem (%)</label>
                        <input type="number" id="calc-percent" class="w-full p-2 border rounded-md" placeholder="%">
                    </div>
                    <div>
                        <label for="calc-valor" class="block font-medium mb-1">Valor (R$)</label>
                        <input type="number" id="calc-valor" class="w-full p-2 border rounded-md" placeholder="R$">
                    </div>
                </div>
                <button id="calc-btn" class="mt-4 w-full bg-[var(--cor-primaria)] text-white font-bold py-2 px-4 rounded-md hover:bg-[var(--cor-primaria-hover)]">Calcular</button>
                <div id="calc-resultado" class="mt-4 pt-4 border-t-2 border-dashed"></div>
            </div>
        </div>

        <div id="tool-pix" class="tool-content hidden">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-lg font-bold mb-4 border-b pb-2">Gerador de Cobrança PIX</h3>
                <div class="space-y-4">
                    <div>
                        <label for="pix-valor" class="block font-medium mb-1">Valor da Cobrança (R$)</label>
                        <input type="number" id="pix-valor" class="w-full p-2 border rounded-md" placeholder="R$">
                    </div>
                    <div>
                        <label for="pix-id" class="block font-medium mb-1">Identificador (Opcional)</label>
                        <input type="text" id="pix-id" class="w-full p-2 border rounded-md" placeholder="Ex: ref001" maxlength="25">
                    </div>
                </div>
                <button id="pix-generate-btn" class="mt-4 w-full bg-[var(--cor-primaria)] text-white font-bold py-2 px-4 rounded-md hover:bg-[var(--cor-primaria-hover)]">Gerar QR Code</button>
                <div id="pix-result-container" class="mt-4 pt-4 border-t-2 border-dashed hidden">
                    <p class="text-center font-semibold mb-2">Mostre ao cliente ou envie o print:</p>
                    <div class="flex justify-center">
                        <img id="pix-qrcode-img" class="border-4 border-gray-200 rounded-lg" src="" alt="QR Code PIX">
                    </div>
                    <textarea id="pix-brcode-text" class="absolute -left-full"></textarea>
                    <button id="pix-copy-btn" class="mt-4 w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-md hover:bg-gray-700">Copiar Código (Copia e Cola)</button>
                </div>
            </div>
        </div>
        
        <div id="tool-marketing" class="tool-content hidden">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-lg font-bold mb-4 border-b pb-2">Marketing: Adicionar Logo na Foto</h3>
                <div>
                    <label for="image-upload" class="block font-medium mb-1">1. Escolha uma foto do seu trabalho:</label>
                    <input type="file" id="image-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--cor-primaria)] file:text-white hover:file:bg-[var(--cor-primaria-hover)]">
                </div>
                <div id="preview-container" class="mt-4 hidden">
                    <p class="block font-medium mb-2">2. Pré-visualização:</p>
                    <div class="relative w-full border rounded-md overflow-hidden">
                        <canvas id="image-canvas" class="block w-full h-auto"></canvas>
                        <div id="canvas-loader" class="absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center hidden">
                            <div class="loader"></div>
                        </div>
                    </div>
                </div>
                <a id="download-btn" href="#" download="foto-com-logo.png" class="mt-4 w-full block text-center bg-gray-400 text-white font-bold py-2 px-4 rounded-md pointer-events-none opacity-50">
                    3. Baixar Imagem
                </a>
            </div>
        </div>

    </div>
</div>
    
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4">
        <div id="modal-content" class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md"></div>
    </div>
    
    <div id="pdf-container">
      <div id="pdf-content" class="bg-white text-black font-sans w-[794px]"></div>
    </div>

    <template id="template-cliente">
        <div class="bg-white p-4 rounded-lg shadow-sm flex justify-between items-center cursor-pointer hover:bg-gray-50" data-client-id="">
            <div>
                <p class="font-bold nome-cliente"></p>
                <p class="text-sm text-gray-600 telefone-cliente"></p>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-gray-400"><path d="m9 18 6-6-6-6"/></svg>
        </div>
    </template>
    
    <template id="template-despesa">
        <div class="bg-white p-4 rounded-lg shadow-sm flex justify-between items-center">
            <div class="cursor-pointer expense-item flex-grow" data-id="">
                <p class="font-bold descricao-despesa"></p>
                <p class="text-sm text-gray-500 data-despesa"></p>
            </div>
            <div class="flex items-center gap-2">
                <p class="font-semibold text-red-600 valor-despesa"></p>
                <button class="delete-expense-btn p-2 hover:bg-gray-200 rounded-full" data-id="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-red-500">
                        <path d="M3 6h18"></path>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                        <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                </button>
            </div>
        </div>
    </template>

    <template id="template-item-orcamento">
        <div class="flex gap-2 items-center" data-index="">
            <input type="text" class="item-desc w-full p-2 border rounded-md" placeholder="Descrição">
            <input type="number" value="1" class="item-qty w-20 p-2 border rounded-md" placeholder="Qtd">
            <input type="number" step="0.01" class="item-val w-24 p-2 border rounded-md" placeholder="Valor">
            <button type="button" class="remove-item-btn text-red-500 p-1 rounded-full hover:bg-red-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 pointer-events-none">
                    <path d="M3 6h18"></path>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                    <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </button>
        </div>
    </template>

    <template id="template-historico-orcamento">
        <div class="bg-gray-50 p-3 rounded-lg flex justify-between items-center">
            <div class="flex-grow cursor-pointer budget-history-item" data-id="">
                <p class="font-semibold titulo-orcamento"></p>
                <div class="datas-container"></div>
            </div>
            <div class="flex items-center">
                <span class="status-orcamento px-2 py-1 text-xs font-semibold rounded-full"></span>
                <button class="pdf-budget-btn p-2 hover:bg-gray-200 rounded-full ml-2" data-id="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                </button>
            </div>
        </div>
    </template>
    
    <template id="template-orcamento">
        <div class="bg-white p-4 rounded-lg shadow-sm">
            <div class="flex justify-between items-start">
                <div>
                    <p class="font-bold text-lg titulo-orcamento"></p>
                    <p class="text-sm text-gray-600 nome-cliente"></p>
                    <p class="text-lg font-semibold text-gray-800 mt-2 valor-total"></p>
                    <p class="text-sm font-semibold data-agendamento"></p>
                </div>
                <div class="text-right">
                    <span class="status-orcamento px-2 py-1 text-xs font-semibold rounded-full"></span>
                    <div class="mt-2 flex gap-2">
                        <button class="edit-budget-btn p-2 hover:bg-gray-200 rounded-full" data-id="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                            </svg>
                        </button>
                        <button class="pdf-budget-btn p-2 hover:bg-gray-200 rounded-full" data-id="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                            </svg>
                        </button>
                        <button class="status-budget-btn p-2 hover:bg-gray-200 rounded-full" data-id="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="template-transacao-relatorio">
        <div class="flex justify-between items-center bg-gray-50 p-2 rounded">
            <div>
                <p class="font-semibold descricao-transacao"></p>
                <p class="text-sm text-gray-500 data-transacao"></p>
            </div>
            <p class="font-bold valor-transacao"></p>
        </div>
    </template>


<script type="module" src="js/main.js"></script>

<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/service-worker.js').then(registration => {
                console.log('Service Worker registrado com sucesso:', registration);
            }).catch(error => {
                console.log('Falha ao registrar o Service Worker:', error);
            });
        });
    }
</script>

</body>
</html>